{"title":"Deskriptive Statistik","markdown":{"headingText":"Deskriptive Statistik","containsRefs":false,"markdown":"\n\n\nThis notebook is a refresher on basic **descriptive statistics**. It is assumed that this material has been covered in an undergraduate statistics course before. We will use our existing knowledge and practically apply it in Python. \n\nTo this end, the main learning goals of this Chapter are:\n\n**A/ Provide you with a quick refresher on**\n\n- measures of location: mean, median, percentiles, quartiles\n- measures of variability: range, variance, standard deviation\n\n**B/ Practice coding in Python**\n\n- we will implement most concepts from scratch\n- we will learn that most concepts applied in this course have already been programmed in python and packaged into modules\n- we will start using some relevant modules\n\n\n# Measures of location\n\nA location parameter of a (probability) distribution is a scalar parameter, which determines the \"location\" or shift of the distribution. \n\nWe will be using the following monthly sales data from **Statistics Inc.**:\n\n| Month | Sales |\n|:-----:|:-----:|\n|   1   |  2020 |\n|   2   |  2075 |\n|   3   |  2125 |\n|   4   |  2040 |\n|   5   |  1980 |\n|   6   |  1955 |\n|   7   |  2050 |\n|   8   |  2165 |\n|   9   |  2070 |\n|   10  |  2260 |\n|   11  |  2060 |\n|   12  |  2040 |\n\n## Mean\n\n### Definition\n\nLikely the most important and most known measure of location is the `mean`, also called average value for a given variable.\n\nTwo different means depending on the data:\n\n1. if data from a sample: mean is denoted by $\\bar{x}$\n\n2. if data from a population: mean is denoted by $\\mu$\n\nThe value of variable $X$ for the $i^{th}$ observation is denoted by $x_i$.\n\n**Sample mean** for a sample with $n$ observations:\n\n$$\\bar{x} = \\frac{\\sum{x_i}}{n}$$\n\n**Population mean** is the same (except for different notation):\n\n$$\\mu = \\frac{\\sum{x_i}}{N}$$\n\nwhere \n- sample: a set that contains some members of a population \n- population: a set that contains all members of a group\n\n\n> **Note** The result for sample and population mean is identical. We use different notation only to indicate whether mean is from population or sample. \n\n### Implementation \n\nThe mean can easily be calculated using the below python code\n\nIf we intend to apply the calculation of a mean on various variables, it is handy to put the concept into a function\n\n## Median\n\n### Definition\n\nThe median is another measure of location. The median is the middle value when data is sorted in ascending order. \n\nThe **median** of a variable is defined as:\n  \\begin{equation}\n    median=\n    \\begin{cases}\n      x_{((n + 1)/2)}, & \\text{if $n$ is odd} \\\\\n      \\dfrac{1}{2}\\big(x_{n/2} + x_{(n/2 + 1)}\\big), & \\text{if $n$ is even}\n    \\end{cases}\n  \\end{equation}\n\nThe median is less sensitive to outliers than the **mean** and hence is a more robust measure of the center of a distribution.\n\nTherefore, the following steps need to be processed to calculate the median\n\n1. Arrange the data in ascending order\n2. Determine number of elements\n3. Calculate median:\n    1. for an odd number of observations, the median is the middle value\n    2. for an even number of observations, the median is the average of the two middle values\n\n### **Naive implementation**\n\nA simple and naive implementation of mean would look as follows:\n\nElements: 0 1 2 3 4 **5 6** 7 8 9 10 11\n\nWe need to take the average of indices 5 and 6. \n\nThis approach is, however, not reproducabel with other lists. \n\n### **Better implementation**\n\nLet's calculate the mean of the sales data by following the above steps in a more general form. We need to introduce \n\n- `list.sort()`: a method (i.e. function) for lists sorting lists in ascending order\n- `comparison operators`: operators to compare two values (e.g. if a is greater than b)\n- `if conditions`: instruct python what to do something if a statement is true or false\n\n**1. Sort sales data in ascending order**\n\n**2. Determine number of elements**\n\n**3. Calculate median depending by checking if odd or even number of elements**\n\nAdvantage of median of mean: mean is influenced by small or large outliers. This is not the case for the median. \n\nExample:\n\n## Mode\n\n### Definition\n\nAnother measure of location is the `mode`. \n\n**Mode**: the mode is the value that occurs most often within a set of numbers.\n\nIf there are no repeats in the data the mode is not defines. \n\nThe mode is an important measure of location for qualitative data (i.e. non numeric data). A data set can have more than one mode. A data set with two modes is called bimodal. A data set with more than two modes is called multimodal. \n\nSimilar to the median the mode is not affected by extreme outlieres.\n\n### Implementation from scratch\n\nWhile the statistical concept is straight forward the implementation in Python is not trivial for beginners.\n\nHere is one possible implementation from scratch (don't worry if it is not entirely clear to you)\n\n### Implementation using modules\n\nWe have reached a point where it becomes quite tedious to implement all concept from scratch. Luckily, most of the concepts we will be using in this class (or actually most concepts in statistics or data analysis) have already been implemented in Python and can `imported` into python. \n\nWe need to introduce a new concept:\n\n- `import modules`: use (e.g. statistical) concepts that have already been implemented in Python\n\n## Percentiles\n\n### Definition\n\nA percentile provides information about how the data is spread over the interval from smallest value to largest value.\n\n> **Percentile** is defined as:\n> \n> The $p^{th}$ percentile is a value such that *at least* $p$ percent of the observations are less than or equal to this value and *at least* $(100 - p)$ per cent of the observations are greater than the value.\n\nIn statistics percentiles are often used to \n\n(i) express the spread of data and \n\n(ii) to remove outliers (e.g. every value $> 95^{th}$ percentile is removed).\n\n**Calculation** of the $p^{th}$ percentile is done in three steps:\n\n1. Sort the data in ascending order (i.e. smallest to largest value)\n\n2. Compute an index $i$\n\n$$i = \\bigg(\\frac{p}{100}\\bigg)\\times n$$\n\nwhere $p$ is the percentiles of interest and n is the number of observations. \n\n3. Two options:\n\n    - $i$ *is not* an integer: the next integer greater than $i$ denotes the position of the $p^{th}$ percentile\n\n    - $i$ *is* an interger: the $p^{th}$ percentile is the average of the values in positions $i$ and $i + 1$\n\n\n\n**Note** \n\n- there are different conventions to calculate percentiles (e.g. round down if $i$ is not an integer). The specific method become less important the more observations we have. \n\n- the 50th percentile is equal to the median\n\n\n### Implementation\n\nLet's use our sales data and calculate the $85^{th}$ percentile. \n\n**Step 1:** Sort the data in ascending order (using `sort`)\n\n**Step 2:** compute index $i$\n\n**Step 3:** calculate percentile\n\nFirst, we need to determine if `idx` is an integer. Second we need to round up if the number is not an integer. For this we need one new function and one new module\n\n- `is_integer()`: To check if a number is an integer (i.e. a whole number)\n- `import math`: import module with math functionality\n\n$85\\%$ of all sales values are below $2.165$. \n\nLet's put everything together into one function. The function should take two arguments:\n\n- list of values: denoted `lst`\n- $p^{th}$ percentile: denoted `p`\n\nWe can now calculate percentiles for any given $p$.\n\nFor example: let's calculate the $15^{th}$ percentile by using our funtion.\n\n### Implementation using `numpy`\n\nIn practice researchers or data analysts wouldn't implement these \"algorithms\" from scratch. Instead modules that provide such functionalities are used. \n\nWe can easily calculate percentiles using a new module:\n\n- `import numpy`: numpy is one of the most fundamental packages providing functionality for scientific computing\n\nNote that the result using numpy differs from previous result. This is due to the percentile function applying a different method for interpolation. We can fix this by providing an additional parameter\n\n## Quantiles\n\n### Definition\n\nIn statistics it is often helpful to divide data into equally sized groups called **quantiles**.\n\nThe include quartiles (dividing the observation into 4 groups) and percentiles (100 groups)#:\n\n- $Q_1$ = lower quartile, $25^{th}$ percentile\n- $Q_2$ = median, $50^{th}$ percentile (equal to the median)\n- $Q_3$ = upper quartile, $75^{th}$ percentile\n\n\n\n\n\n\n\nThe difference between the upper and lower quartiles is called the **interquartile range** and measures the spread of a distribution\n\n### Implementation\n\nUsing `numpy` you can easily calculate quartiles as follows:\n\nYou can also use other quantiles, e.g.\n\n# Measures of Variability\n\n## Standard deviation & variance\n\n### Definition\n\nThe **standard deviation** measures the average deviation from the mean and is defined as follows:\n\n**Sample** standard deviation:\n\n$$s = \\sqrt{\\frac{1}{n-1}\\sum_{i=1}(x_i - \\bar{x})^2}$$\n\n**Population** standard deviation:\n\n$$\\sigma = \\sqrt{\\frac{1}{n}\\sum_{i=1}(x_i - \\mu)^2}$$\n\nwhere $\\mu$ is the population mean and $\\bar{x}$ is the sample mean.\n\nThe **sample variance** is the given by $s^2$, the **population variance** is the given by $\\sigma^2$\n\n### Implementation\n\nGoing forward we will use `numpy` for many of our calculations. \n\n## $z$-Scores\n\n### Definition\n\nRepresents the number of standard deviation an observation is above or below the mean. \n\nThe **$z$-score** for the $i_{th}$ observation of (sample) variable $x$ is defined as:\n\n$$ \\text{$z$-score of $x_i$}= \\dfrac{x_i - \\bar{x}}{s_x} $$\n\nwhere $\\bar{x}$ and $s_x$ are the mean and the standard devation of x, respectively.\n\nThe $z$-score standardizes a variable so its unit of measurement no longer matters. To this end, it is not sensitive to how the variable is scaled and/or shifted.\n\n**Example**: if the $z$-score of a particular observation equals 2.5, the observation is 2.5 standard deviations above the mean. \n\n\n### Implementation\n\n# New Python concepts\n\n## New functions\n\nlist.`sort()`: \n\n- sorts a list in ascending order and can be applied to any list object. \n- is an inplace method meaning the method doesn't return a new list, but sorts the existing list\n\n`float.is_integer()`:\n\n- checks if a float (a number with digits) is a whole number (e.g. 3.0)\n- can only be applied to numbers with digits\n\n## Comparison operators\n\nWith these operators we can compare two variables. In Python you can use the following comparison operators\n\n| Operator | Name                     |\n|:--------:|--------------------------|\n|    ==    | Equal                    |\n|    !=    | Not equal                |\n|     >    | Greater than             |\n|     <    | Less than                |\n|    >=    | Greater than or equal to |\n|    <=    | Less than or equal to    |\n\nComparison operators return `true` if comparison is true else they return `false`.\n\nLet's look at some examples:\n\n## If condition\n\nIf statements are very useful as the run code depending on a test condition. \n\nSo syntax in Python is as follows:\n\n```Python\nif condition:\n    do something\n```\n\nWe can also write:\n\n```Python\nif condition:\n    do something\nelse: \n    do something differently\n```\n\nIf we want to test more than one condition we can do this with the `elif` keyword\n\n```Python\nif condition1:\n    do something\nelif condition2: \n    do something differently\nelse:\n    do something by default\n```\n\n**Example**: let's write a function that tests if a number is big or not. Any number above $100$ is defined as big\n\n## Importing modules\n\nMost of the functionality we are using has been programmed and packaged into a specific module. We can access a module with the keyword `import`. After importing a module we can then use it and access the associated objects and methods.\n\n```Python\nimport module_name\n\nmodule_name.module_function()\n\n```\n\n> **Note**: importing a module requires most modules to be downloaded and installed first. This will be explained in more detail in due course\n\n**Example**: below we are importing the module`statistics` which provides basic functionality for statistical analysis.\n\nOnce the above cell is executed we can use the module. Here we are using the `mean` function from statistics\n\n**Example**: below we are importing `math` which provides basic math functionality\n\n**Example**: `numpy`\n\nLet's introduce one of the most important modules for data analysis: `numpy`. \n\nNumpy [see here](https://numpy.org/) is one of the most fundamental packages of python and provides a vast amount of functionality for scientific computing and is used by researchers throughout the world to facilitate there research (e.g. numpy played an important role in creating the first picture of a black hole; [see here](https://numpy.org/case-studies/blackhole-image/))\n\nMany other fundamental modules are built on or rely heavily on numpy (e.g. most of the modules we will use during our course).  \n\nFor more background please also refer to the recently published paper in Nature ([paper](https://www.nature.com/articles/s41586-020-2649-2))\n\nWe will gradually introduce some additional modules that are integral for doing data analysis in python. Some of the most important package we will learn about are:\n\n- `pandas`: module for tabular data and dataframes\n- `matplotlib`: module for visualizations\n- `scipy`: module for scientific analysis\n- `sklearn`: module for machine learning\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":false,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"jupyter"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../styles.css"],"toc":true,"output-file":"S02a_Descriptive_Statistics.html"},"language":{},"metadata":{"lang":"de","fig-responsive":true,"quarto-version":"1.2.269","theme":"cosmo","page-layout":"full"},"extensions":{"book":{"multiFile":true}}}}}